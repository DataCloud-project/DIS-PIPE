<!DOCTYPE html>
<html>
<head>
	<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->
	<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/myStyle.css') }}">
	<script type="text/javascript" src="{{ url_for('static',filename='scripts/durFreqScript.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static',filename='scripts/initialScript.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static',filename='scripts/filterScript.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static',filename='scripts/reqListScript.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static',filename='scripts/cCheckingScript.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static',filename='scripts/mapScript.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static',filename='scripts/scanScript.js') }}"></script>

    <!-- Fontawesome CDN Link -->
	<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<title>Index</title>
</head>

<!-- Da sconosciuto
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="http://viz-js.com/bower_components/viz.js/viz-lite.js"></script>
<script src="https://github.com/magjac/d3-graphviz/releases/download/v0.0.4/d3-graphviz.min.js"></script>-->

<!-- StackOverflow
<script src="//d3js.org/d3.v4.min.js"></script> -->
<script src="https://unpkg.com/viz.js@1.8.0/viz.js"></script>
<!-- <script src="{{url_for('static', filename='styles/provaViz.js')}}"></script> -->
<!--<script src="https://unpkg.com/d3-graphviz@0.1.2/build/d3-graphviz.js"></script>
<script src="https://github.com/mdaines/viz.js"></script>-->

<!--
<script src="https://dagrejs.github.io/project/dagre-d3/latest/dagre-d3.min.js"></script>
<script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
 -->


<!-- Da codice sorgente
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://dagrejs.github.io/project/graphlib-dot/v0.6.4/graphlib-dot.min.js"></script>
<!--<script src="https://dagrejs.github.io/project/dagre-d3/v0.5.0/dagre-d3.min.js"></script>
<script src="https://dagrejs.github.io/project/dagre-d3/latest/dagre-d3.js"></script> -->

<!-- Dot parser
<script src="/static/styles/dotparser.js"></script>
<script src="/static/styles/dotgraph.js"></script> -->

<script>
function showImg(img) {
    var x = document.getElementById(img);
    if(x.style.display == "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
		x.style.width= "100%";
    }
}
/*
window.onload = function () {
	if (document.readyState == "complete") { 
		document.getElementById("loadingMessage").style.visibility = "hidden";	
	}	
}
*/
function checkRefresh()
{
		// This is a fresh page load
		document.refreshForm.visited.value = "1";
		if (document.readyState == "complete") { 
			document.getElementById("loadingMessage").style.visibility = "hidden";	
		}	
		console.log("doing reload")
		var oReq = new XMLHttpRequest();

    	//oReq.addEventListener("load", jarListener);
		oReq.open("POST", frontend+"deleteRemap", true);
    	oReq.send()
		// You may want to add code here special for
		// fresh page loads

}
</script>


<body onLoad="checkRefresh()">

<p id="path_frontend" style="display:none">{{path}}</p>

<form name="refreshForm">
<input type="hidden" name="visited" value="1" />
</form>
	
	<div id="loadingMessage" style="visibility:visible">
		This page is loading!
		<br />
		Please wait.
		<div class="loader"></div>
	</div>

	<input type="checkbox" id="check" onclick="mainMenu()">
	<label for="check">
		<i class="fas fa-bars" id="btn"></i>
	</label>
	<div class="container">
		<div class="menu" id="menu">
			<input type="radio" name="slider" checked id="map" onclick="displayContent()">
			<input type="radio" name="slider" id="elanalysis" onclick="displayContent()">
			<input type="radio" name="slider" id="cChecking" onclick="displayContent()">
			<input type="radio" name="slider" id="scan" onclick="displayContent()">
			<div class="list" id="list">
				<label for="map" class="map">
					<i class="fas fa-sitemap"></i>
					<span class="topic">Map</span>
				</label>
				<label for="elanalysis" class="elanalysis">
					<i class="fas fa-chart-line"></i>
					<span class="topic">Event Log Analysis</span>
				</label>
				<label for="cChecking" class="cChecking"  onclick="cCheckingComputation()">
					<i class="fas fa-check-double"></i>
					<span class="topic">Conformance Checking</span>
				</label>
				<label for="scan" class="scan" onclick="scanRequest()">
					<i class="fas fa-check-double"></i>
					<span class="topic">Scan section</span>
				</label>
				<div class="slider"></div>
			</div>
			
			<div class="bottomleft" id="bottomleft">
				<form action="" method='POST' enctype = "multipart/form-data">
					<!-- <button type="button" for="myFile">Import log</button> -->
					<button class="menu_button" type="button" onclick="update()">Import log</button>
					<input accept=".xes" type='file' id="file" name="file" style="display:none">
					<br />
					<button class="menu_button" type="button" onclick="exportDsl()">Export to DSL</button>
					<br />
					<button class="menu_button" type="button">Export to DEF-PIPE</button>
					<input type="submit" id="updateBtn" value="Update" style="display:none">
					<input type="hidden" value="{{updated}}" name="updated" id="updated">
				</form>
			</div>	
		</div>			
		
		<div class="content" id="content">
			
				<div class="text-content">
					<div class="map text" id="map-text">
					 	<div class="title" style="float: left"> Map Content</div>
						<p id='digraphF' style='display:none'>{{ stringF }}</p>
						<p id='digraphP' style='display:none'>{{ stringP }}</p>
						<p id='allDt' style='display:none'>{{ stringDuration }}</p>
						<p id='allFq' style='display:none'>{{ stringFrequency }}</p>
						<p id='allEdgeFq' style='display:none'>{{ stringEdgeFrequency }}</p>
						<p id='usedVariable' style='display:none'>{{ stringUsedVarible }}</p>
						<p id='allEdgeDt' style='display:none'>{{ stringEdgeDuration }}</p>
						<p id='stringPetriNet' style='display:none'>{{ stringPetriNet }}</p>
						<p id='petriFreq' style='display:none'>Try</p>
						<p id='petriPerf' style='display:none'>Try</p>
						<p id='bpmn' style='display:none'>Try</p>
						<p id='mapTitle' style="text-align: center;">{{ nameupload }}</p>
						<p id='median' style='display:none'>{{ median }}</p>
						<p id='total' style='display:none'>{{ total }}</p>
						<p id='traceDt' style='display:none'>{{ traceDt }}</p>
						<p id='segmenti' style='display:none'>{{ segments }}</p>
						
						<div class="slidecontainer">
						  <input type="range" min="1" max="500" value="100" class="sliderZoom" id="myRange">
						  <p style="font-size: 10px;">Zoom: <span id="demo"></span>%</p>
						</div>
						<br>
						
						<input type="checkbox" id="check_tabs">
						<label for="check_tabs">
							<i class="fas fa-edit" id="btn_tabs"></i>
						</label>
						
						<!-- First page - Map Content -->
						<div class="mapContainer">
						
							<span class="popuptext" id="myPopup">Popup text...
								
							</span>
							
							<!-- graph container -->
							<div class="map-content" id="map-content">
								<svg id="graphContainer">
								
								</svg>
							</div>
							<!-- end graph container -->

							<!-- Feedback of change -->
							<div class="blocker_first" id="blocker5" onclick="closeChangement()"></div>
							<div class="form-loading" id="myChange">
								<div class="form-container">
									<center>
									<br>
									<span>Change Applied</span>
									<br>
									<button type="button" class="btn" onclick="closeChangement()">Close</button>
									</center>
								</div>
							</div>
							<!-- End feedback of change -->
						
							<!-- popup path and activities -->
							<div class="mytabs">
							
									<input type="radio" name="mytabs" id="tabFreq" checked="checked" value="frequency" onclick="getMap()">
									<label id="labelTabFreq" for="tabFreq">Frequency</label>
									<div class="tab">
										
										<form action="" method='POST'>
											<center>
											<input type="hidden" id='tabTypeFreq' name='tabType' value="frequency">
											<input type="range" min="0" max="100" value="{{myPathF_init}}" class="sliderPA" id="myPathF" name="myPathF">
											Path: <textarea  class="vmiddle" style="resize: none;" rows="1" cols="2"  id="pathF"></textarea>%
											<button class="setPath" type="button" style="width: 70px; " id="setPathF" onclick="updateInfo('PF')">set Path</button>
											
											<br><br>

											<input type="range" min="0" max="100" value="{{myActF_init}}" class="sliderPA" id="myActF" name="myActF">
											Activities: <textarea  class="vmiddle" style="resize: none;" rows="1" cols="2" id="actF"></textarea>%
											<button type="button" style="width: 95px; " id="setActF" onclick="updateInfo('AF')">set Activities</button>
											<br>
											
											<input type="hidden" min="0" max="100" value="{{myPathP_init}}" name="myPathP">
											<input type="hidden" min="0" max="100" value="{{myActP_init}}"  name="myActP">
											
											
											<br />
											
											<select id="perfromanceFrequency" name="freqs" class="dropdown dropdown_width">
											  <option value="absFreq">Absolute frequency</option>
											  <option value="caseFreq">Case Frequency</option>
											  <option value="maxRep">Max. repetition</option>
											</select>
											
											<br />
											<br />
										
										
											<button class="dis_submit" disabled type="button" onclick="pre_request('false')">Submit</button>

											<br />

											<p class="change_form" style="visibility: hidden;"  > * Apply changes</p>
											
											<button id="invisibleButton" type="button" hidden>My Button</button>
											</center>
										
										</form> 
										
										
									</div>
									
									
									<input type="radio" name="mytabs" id="tabPerf" value="performance" onclick="getMap()">
									<label id="labelTabPerf" for="tabPerf">Performance</label>
									<div class="tab">
										
										<form action="" method='POST'>
											<center>
											<input type="hidden" id='tabTypePerf' name='tabType' value="performance">
											<input type="range" min="0" max="100" value="{{myPathP_init}}" class="sliderPA" id="myPathP" name='myPathP'>
											Path: <textarea  class="vmiddle" style="resize: none;" rows="1" cols="2" id="pathP"></textarea>% 
											<button class="setPath" type="button" style="width: 70px; " id="setPathP" onclick="updateInfo('PP')">set Path</button>
											<br><br>
											
											
											<input type="range" min="0" max="100" value="{{myActP_init}}" class="sliderPA" id="myActP" name='myActP'>
											Activities: <textarea  class="vmiddle" style="resize: none;" rows="1" cols="2" id="actP"></textarea>%
											<button type="button" style="width: 95px; " id="setActP" onclick="updateInfo('AP')">set Activities</button>
											<br>
											<input type="hidden" min="0" max="100" value="{{myPathF_init}}" name="myPathF">
											<input type="hidden" min="0" max="100" value="{{myActF_init}}"  name="myActF">
											<input type="hidden" value="{{perf_checked}}"  name="perf_checked" id="perf_checked">
											
											<br />
											
											<select id="performanceDuration" name="perfs" class="dropdown dropdown_width">
												<option selected value="totDur">Total duration</option>
												<option value="medDur">Median duration</option>
												<option value="meanDur">Mean duration</option>
												<option value="maxDur">Max. duration</option>
												<option value="minDur">Min. duration</option>
											</select>
											
											<br />
											<br />
										
											<button class="dis_submit" disabled type="button" onclick="pre_request('true')">Submit</button>

											<br>
											<p class="change_form" style="visibility: hidden;" > * Apply changes</p>

											</center>
											
										</form> 										
										
									</div>
							</div>	
							<!-- end popup -->
				
						</div>
						<!-- end first page -->
						
					</div>
					
					<!-- Second page Event log analisis -->
					<div class="elanalysis text" id="elanalysis-text">
					 	<div class="title"> Event Log Analysis Content</div>
						<div class="row">
							<div class="column left">
							<div class="containerVariants">
								<h4 style="text-align:center;">Variants</h4>
								<hr>
								<br>
								<ul id="variants-ul">
								</ul>
							</div>
							</div>
							<div class="column middle">
							<div class="containerCases">
								<h4 style="text-align:center;">Cases</h4>
								<hr>
								<br>
								<ul id="case-ul">
								</ul>
							</div>
							</div>
							<div class="column right">
								<table id="eventsTable">
							
								</table>
							</div>
							
							<div class="column filtro">
								
								<h4 style="text-align:center;">Filters</h4>
								<ul id="variants-filters">
								</ul>
							
								<hr>

								<center>
									<span>Choose a filter:</span>
									
									<br>
								

								<button title="Focus the analysis on a time period" style="text-align:center;" class="filtro_bottone legend text-table " id="timeframe_filter" onclick="openForm(this.id)">
									🕑 Timeframe
								</button>
								<br>

								<button title="Focus the analysis of the data set &#013; according to certain performance criteria" style="text-align:center;" class="filtro_bottone legend text-table"id="perf_filter" onclick="openForm(this.id)">
									⌛ Performance
								</button>
								<br>
			
								<button title="You can use it to split your data set &#013; based on a particular attribute, but also to &#013;filter cases based on the presence or absence of activities, &#013;to filter case IDs and variants, or to remove individual &#013; activities or attribute values" style="text-align:center;" class=" filtro_bottone legend text-table" id="attribute_filter" onclick="openForm(this.id)">
									📊 Attribute
								</button>
								<br>

								<button style="text-align:center; visibility: hidden;" class=" filtro_bottone legend text-table" id="follower_filter" onclick="openForm(this.id)">
									➡️ Folower
								</button>
		
								<br>
								<br>
								<div hidden="true" id="history_span">
									<h4 style="text-align:center;">Filters History</h4>
									
									<div id="percentage_trace">Cases: 100%</div>
									<div id="percentage_event">Events: 100%</div>
									<hr>
									<br>
								</div>

								<div id="history_div">

								</div>

								</center>

								
						
							</div>
							
						</div>

						<input type="checkbox" id="check_filter">
						<!-- <label for="check_filter">
							<i class="fas fa-filter" id="btn_filter"></i>
						</label> -->
						
						<div class="mytabs">
							
							<input type="radio" name="myfilter" id="tabFilter" checked="checked" value="filtering">
							<label for="tabFilter">Filtering</label>
							<!-- <div class="tab"> 
								<div class="btn-group">
									<button type="button" id="timeframe_filter" style="grid-column: 1 / 2;grid-row: 1;" onclick="openForm(this.id)"><i class="far fa-clock"></i>
										<strong>Timeframe</strong>
										<br>
										<small>Filters by timestamps</small>
									</button>
									<i id="timeframe_remove" class="fa-solid fa-trash-can" style="visibility: hidden; grid-column: 2 / 2;grid-row: 1;" onclick="removeFilter(this.id)"></i>
									<button type="button"id="perf_filter" style="grid-column: 1 / 2;grid-row: 2;" onclick="openForm(this.id)"><i class="fas fa-stopwatch"></i>
										<strong>Performance</strong>
										<br>
										<small>Filters cases by performance</small>
									</button>
									<i id="perf_remove" class="fa-solid fa-trash-can" style="visibility: hidden; grid-column: 2 / 2;grid-row: 2;" onclick="removeFilter(this.id)"></i>
									<button type="button" id="endpoints_filter" style="grid-column: 1 / 2;grid-row: 3;" onclick="openForm(this.id)"><i class="fas fa-route"></i>
										<strong>Endpoints</strong>
										<br>
										<small>Removes incomplete cases</small>
									</button>
									<i id="endpoints_remove" class="fa-solid fa-trash-can" style="visibility: hidden; grid-column: 2 / 2;grid-row: 3;" onclick="removeFilter(this.id)"></i>
									<button type="button" id="attribute_filter" style="grid-column: 1 / 2;grid-row: 4;" onclick="openForm(this.id)"><i class="fas fa-comment-slash"></i>
										<strong>Attribute</strong>
										<br>
										<small>Removes events by attribute</small>
									</button>
									<i id="attribute_remove" class="fa-solid fa-trash-can" style="visibility: hidden; grid-column: 2 / 2;grid-row: 4;" onclick="removeFilter(this.id)"></i>
									<button type="button" id="follower_filter" style="grid-column: 1 / 2;grid-row: 5;" onclick="openForm(this.id)"><i class="fas fa-people-arrows"></i>
										<strong>Follower</strong>
										<br>
										<small>Filters by subsequences</small>
									</button>
									<i id="follower_remove" class="fa-solid fa-trash-can" style="visibility: hidden; grid-column: 2 / 2;grid-row: 5;" onclick="removeFilter(this.id)"></i>
									<div> &zwnj;</div>
									<div> &zwnj;</div>
									<div> &zwnj;</div>
									<div> &zwnj;</div>
									<div> &zwnj;</div>
									<div> &zwnj;</div>
				
									<span hidden="true" underlined id="history_span"> History Paragraph</span>
									<div> &zwnj;</div>
									<div> &zwnj;</div>
									<div> &zwnj;</div>
									<div id="history_div">

									</div>
								
								</div>
							</div> -->
						</div>
						
						<div class="blocker" id="blocker4" onclick="closeOrder()"></div>
						<div class="blocker" id="blocker3" onclick="closeRemove()"></div>
						<div class="blocker" id="blocker2" onclick="closeLoading()"></div>

						<div class="blocker" id="blocker" onclick="closeForm()"></div>
						<div class="form-popup" id="myForm">
						  <!-- INCOLLARE FORM -->
							<form action="" class="form-container">
							<h1 id="filter_title" style="color:#7a4791; text-align: center">Timeframe</h1>
							<hr style="background:#cfa8d5">
							<br>
							<!-- FILTER FOR TIMEFRAME -->
							<center>
							<div id="timeframe_filter_div" style="display:none">
								<label for="starting-time">Choose your starting time:</label>
								<input type="datetime-local" id="starting-time" name="starting-time" value="2018-06-07T00:00:00" min="2010-01-01T00:00:00" max="2021-12-31T00:00:00" step="1">
								<br />
								<br />
								<label for="ending-time">Choose your ending time:</label>
								<input type="datetime-local" id="ending-time" name="ending-time" value="2018-06-14T00:00:00" min="2010-01-01T00:00:00" max="2021-12-31T00:00:00" step="1">
								<br />
								<br />
								<text>Keep cases by:</text>
								<select name="keep_timeframe" id="keep_timeframe" class="dropdown dropdown_width_timeframe">
									<option value="contained">Contained in timeframe</option>
									<option value="intersecting">Intersecting timeframe</option>
									<option value="started">Started in timeframe</option>
									<option value="completed">Completed in timeframe</option>
									<option value="trim">Trim to timeframe</option>
								</select>
								<br />
								<br />
								<img id="img" src="../static/images/contained.jpg" style="width:400px; height: auto; float: center">
							</div>
							</center>
							<center>
							<!-- FILTER FOR PERFORMANCE -->	
							<div id="perf_filter_div" style="display:none">
								<label for="filter_by_performance">Filter by: </label>
								<select id="filter_by_performance" name="filter_by_performance" class="performance_drop dropdown dropdown_width_performance">
									<option value="caseDuration">Case duration</option>
									<option value="eventsNumber">Number of events</option>
								</select>
								<br />
								<br />
								<label id="label_input_min" for="input_min">Minimum duration: <small>(Use cases running longer than)</small></label>
								<br />
								<input type="number" id="input_min" name="input_min" step="any" />
								<select id="select_time_1" name="select_time_1" class="dropdown dropdown_width_performance_ms" style="padding: 3px">
									<option value="mills">Milliseconds</option>
									<option value="seconds">Seconds</option>
									<option value="minutes">Minutes</option>
									<option value="hours">Hours</option>
									<option value="days">Days</option>
									<option value="weeks">Weeks</option>
									<option value="years">Years</option>
								</select>
								<br />
								<label id="label_input_max" for="input_max">Maximum duration: <small>(Use cases running shorter than)</small></label>
								<br />
								<input type="number" id="input_max" name="input_max" step="any" />
								<select id= "select_time_2" name="select_time_2" class="dropdown dropdown_width_performance_ms" style="padding: 3px">
									<option value="mills">Milliseconds</option>
									<option value="seconds">Seconds</option>
									<option value="minutes">Minutes</option>
									<option value="hours">Hours</option>
									<option value="days">Days</option>
									<option value="weeks">Weeks</option>
									<option value="years">Years</option>
								</select>
							</div>	
							</center>
								
							<!-- FILTER FOR ENDPOINTS -->
							<div id="endpoints_filter_div" style="display:none">
								<label for="filter_by_2">Filter by: </label>
								<select id= "filter_by_2" name="filter_by" class="dropdown dropdown_width">
									<option selected value="activity">Activity</option>
									<option value="resource">Resource</option>
									<option value="costs">Costs</option>
									<option value="caseID" style="display:none">CaseID</option>
									<option value="variants" style="display:none">Variants</option>
								</select>
								<label for="mode_for_endpoints" style="margin-left: 10px;">Mode: </label>
								<select id="mode_for_endpoints" name="mode_for_endpoints" class="dropdown dropdown_width">
									<option value="discard">Discard cases</option>
									<option value="trimLongest">Trim Longest</option>
									<option value="trimFirst">Trim First</option>
								</select>
								
								<text id="endpoints_text" style="font-size: 12px; color:#4f4f4f; float:right; max-width: 300px; margin-left: 5px;"></text>
								<br />
								<br />
								<div style="width: 45%; float:left">
									<text style="font-size:12px; float:left;">Start event values: </text>
									<br />
									<fieldset id="fieldset1" class="checkboxgroup">
										<label><input type="checkbox"> checkbox 1</label>
										<label><input type="checkbox"> checkbox 2</label>
										<label><input type="checkbox"> checkbox 3</label>
										<label><input type="checkbox"> checkbox 4</label>
									</fieldset>
								</div>
								<div style="width: 45%; float:right">
									<text style="font-size:12px; float:left;">End event values: </text>
									<br />
									<fieldset id="fieldset2" class="checkboxgroup">
										<label><input type="checkbox"> checkbox 1</label>
										<label><input type="checkbox"> checkbox 2</label>
										<label><input type="checkbox"> checkbox 3</label>
										<label><input type="checkbox"> checkbox 4</label>
									</fieldset>
								</div>
								<br />
								<br />
								<br />
							</div>
							<!-- FILTER FOR ATTRIBUTES -->
							<div id="attribute_filter_div" style="display:none">
								<div class="row">
									<div class="left_pop">
										<span>
											<label for="filter_by">Filter by: </label>
											<select id= "filter_by" name="filter_by" class="dropdown dropdown_width" onchange="change_filter_type()">
												<option value="activity">Activity</option>
												<option value="resource">Resource</option>
												<option value="costs">Costs</option>
												<option value="caseID">CaseID</option>
												<option value="variants">Variants</option>
											</select>
										</span>
									</div>
									<div class="left_pop">
										<span>
											<label id="mfa2" for="mode_for_attribute"style="margin-left: 10px;">Mode: </label>
											<select id="mode_for_attribute" name="mode_for_attribute" class="dropdown attribute_drop">
												<option value="selected">Keep selected</option>
												<option value="mandatory">Mandatory</option>
												<option value="forbidden">Forbidden</option>
											</select>
	
										</span>
									</div>
									<div class="left_pop">
										<span>
											<text id="attribute_text" style="font-size: 12px; color:#4f4f4f; "></text>
										</span>
									</div>
								</div>		
								
								
								<div id="container_div" >
									<text style="font-size:12px; float:left;">Event values: </text>
									<br />
									<fieldset id="fieldset3" class="checkboxgroup" style=" height:200px; overflow:auto;">
										
									</fieldset>
								</div>	
							
							</div>
							
							<!-- FILTER FOR FOLLOWER -->
							<div id="follower_filter_div" style="display:none">
								<label for="filter_by_2">Filter by:  </label>
								<select id= "filter_by_2" name="filter_by" class="dropdown dropdown_width">
									<option value="activity">Activity</option>
									<option value="resource">Resource</option>
									<option value="costs">Costs</option>
									<option value="caseID" style="display:none">CaseID</option>
									<option value="variants" style="display:none">Variants</option>
								</select>
								<br />
								<label for="reference_for_follower">Reference event must be </label>
								<select id="reference_for_follower" name="reference_for_follower" class="dropdown dropdown_width" style="padding: 3px">
									<option value="even_follow">eventually followed</option>
									<option value="dir_follow">directly followed</option>
									<option value="nev_even_follow">never eventually followed</option>
									<option value="nev_dir_follow">never directly followed</option>
								</select>
								<label for="mode_for_follower"> by a follower event.</label> 
								<br />
								<br />
								<div style="width: 45%; float:left">
									<text style="font-size:12px; float:left;">Reference event values: </text>
									<br />
									<fieldset id="fieldset4" class="checkboxgroup">
										<label><input type="checkbox"> checkbox 1</label>
										<label><input type="checkbox"> checkbox 2</label>
										<label><input type="checkbox"> checkbox 3</label>
										<label><input type="checkbox"> checkbox 4</label>
									</fieldset>
								</div>
								<div style="width: 45%; float:right">
									<text style="font-size:12px; float:left;">Follower event values: </text>
									<br />
									<fieldset id="fieldset5" class="checkboxgroup">
										<label><input type="checkbox"> checkbox 1</label>
										<label><input type="checkbox"> checkbox 2</label>
										<label><input type="checkbox"> checkbox 3</label>
										<label><input type="checkbox"> checkbox 4</label>
									</fieldset>
								</div>
								<br />
								<br />
								<br />
								<br />
								<br />
								<br />
								<div style="font-size:12px">
									<input type="checkbox" id="require_for_follower">
									<label for="require_for_follower"> Require </label>
									<select id="mode_for_follower" name="mode_for_follower" class="dropdown dropdown_width" style="padding: 3px" disabled>
										<option value="same">same value</option>
										<option value="different">different values</option>
									</select>
									<label for="require_for_follower"> of</label>
									<select id= "filter_by_follower" name="filter_by" class="dropdown dropdown_width" style="padding: 3px" disabled>
										<option value="activity">Activity</option>
										<option value="resource">Resource</option>
										<option value="costs">Costs</option>
										<option value="caseID" style="display:none">CaseID</option>
										<option value="variants" style="display:none">Variants</option>
									</select>
									<label for="filter_by_follower"> for each pair of events matched above.</label>
									<br />
									<br />
									<input type="checkbox" id="time_for_follower">
									<label for="time_for_follower">Time between matching events must be </label>
									<select id="mode_time_for_follower" name="mode_time_for_follower" class="dropdown dropdown_width" style="padding: 3px" disabled>
										<option value="shorter">shorter</option>
										<option value="longer">longer</option>
									</select>
									<label for="require_for_follower"> than </label>
									<input type="number" id="input_time_follower" name="input_time" step="any" disabled />
									<select id= "select_time_3" name="select_time_3" class="dropdown dropdown_width" style="padding: 3px" disabled>
										<option value="mills">Milliseconds</option>
										<option value="seconds">Seconds</option>
										<option value="minutes">Minutes</option>
										<option value="hours">Hours</option>
										<option value="days">Days</option>
										<option value="weeks">Weeks</option>
										<option value="years">Years</option>
									</select>
								</div>
							
							</div>
							<div class="disapper_space">
								<br />
								<br />
							</div>

							<!-- <center id="disappear_loading" style="visibility: hidden;">
								<div class="loader2"></div>
							</center> -->
							
							<span id="triggerFilterSpan" style="visibility: hidden;" onclick="triggerInvisibleFunction()">Invisible</span>
							
							<div style="text-align:center">
								
								<!-- <button type="submit" class="btn" style="margin-right:10px" onclick="applyFilter()">Apply</button> -->
								<button type="button" class="btn applycancel" style="margin-right:10px; font-size:13px" onclick="asyncCall()">Apply</button>
								<button type="button" class="btn applycancel" style="font-size:13px" onclick="closeForm()">Cancel</button>
							</div>
							
							</form>
						</div>

						

						


						<div class="form-loading" id="myLoading">
							<div class="form-container">
								<center>
								<br>
								<span>Filter Applied</span>
								<br>
								<button type="button" class="btn" onclick="closeLoading()">Close</button>
								</center>
							</div>
						</div>

						<div class="form-loading" id="myRemove">
							<div class="form-container">
								<center>
								<br>
								<span>Filter Removed</span>
								<br>
								<button type="button" class="btn" onclick="closeRemove()">Close</button>
								</center>
							</div>
						</div>

						<div class="form-loading" id="myOrder">
							<div class="form-container">
								<center>
								<br>
								<span>Filters order changed</span>
								<br>
								<button type="button" class="btn" onclick="closeOrder()">Close</button>
								</center>
							</div>
						</div>

								
					</div>
					<!-- End second page -->


					<!-- Start Conformance checking -->
					<div class="cChecking text" id="cChecking-text">
					 	<div class="title"> Conformance Checking</div>

						<span id="back_slide_conf" style="font-size: 23px;
							color: #6d50e2; position: absolute;
							cursor: pointer;
							font-size: 23px;
							top: 35px;
							border-radius: 3px;
							z-index: 3;
							border: 3px #6d50e2;
							right: 130px; visibility: hidden;" onclick="backToPersonalize()">
						 
							<i style="border: 3px #1e7524;" class="fa fa-chevron-left"></i>
					 	</span>

						 <input type="checkbox" id="check_conformance" onchange="displayTracePopUp()">
						 <label for="check_conformance"> 
							 <i class="fa fa-info" aria-hidden="true" id="btn_conformance" style="visibility: hidden;"></i>
						 </label>

						

						<!-- <input type="checkbox" id="check_tabs">
						<label for="check_tabs">
							<i class="fas fa-edit" id="btn_tabs"></i>
						</label> -->


						<!-- <div id="InitialMarking">Initial Marking</div>
						<div id="FinalMarking">Final Marking</div> -->
						<!-- <br> -->
						<!-- <div class="map-content" id="petrinet-content">
							<svg id="petriContainer">
							
							</svg>
						</div> -->
						<center>
						<div id="formConformanceChecking" style="display: block;">
							<!-- INCOLLARE FORM -->
							<br>
							<br>
							<div class="conformance-container">
								<div class="conformance-title">Map transitions to Event classes</div>
								
								<hr>
								<br>
								<br>
								
								<table id="pnml_log_table" style="border-spacing: 0 15px;">
									<tr style="padding: 70px">
										<th>Pnml transitions</th>
										<th style="width: 40%;"> </th>
										<th>Log Activities</th>
									</tr>
									
								
								</table>

								
								<div id="attribute_filter_div">
									<!-- <div class="row">
										<div class="left_pop">
											<span>
												
											</span>
										</div>
										
										<div class="left_pop">
											<span>
												<text style="font-size: 12px; color:#4f4f4f; "></text>
											</span>
										</div>
									</div>		 -->
									
									
									
								
								</div>
							
						
							
								<div style="text-align:center">
									<br>
									<button type="button" style="font-size: 16px; visibility: hidden" onclick="resetField()">Reset</button>
									<button class="conf_check_button" type="button" style="font-size: 16px;" onclick="nextDivForm()">Next</button>
									
								</div>
							
							</div>
						</div>
						</center>
						

						<!-- <center> -->
						<div id="formConformanceChecking2" class="divcenter" style="display: none;">
							<!-- INCOLLARE FORM -->
							<br>
							<br>
							<div class="conformance-container2">
								<div class="conformance-title">Personalize</div>
								<hr>
							
								<div id="personalize_filter_div">

									<div class="row">

										<div class="column-col space2" style=" visibility:hidden">
											
										</div>

										<div class="column-col center2-col" >
											
										
								
											<span>Cost for disalignment activities</span><br>
											<!-- <span>Cost to add/remove activities in/from trace</span><br> -->
											<select id="disalignment_log" onchange="changedisalignment_select()">
												
											</select>
											<textarea class="vmiddle" name="move_model" id="move_model" cols="3" rows="1" onchange="changedisalignment_dictionary('model')"></textarea>
											<textarea class="vmiddle" name="move_log" id="move_log" cols="3" rows="1" onchange="changedisalignment_dictionary('log')"></textarea>
											<br>
											<br>
											<input type="checkbox" id="discard_check" name="" value="True">
											<label for="discard_check"> Discard duplicate traces</label>
											<br>
											<br>
											<span>Planner list</span><br>
											<input type="radio" id="FD" name="planner_list" value="FD">
											<label for="FD">fast-downward</label><br>
											<input type="radio" id="SYMBA" name="planner_list" value="SYMBA">
											<label for="SYMBA">seq-opt-symba-2</label><br>
											<input style="visibility: hidden;" type="radio" id="Planner3" name="planner_list" value="Planner 3">
											<label style="visibility: hidden;" for="Planner3">Planner 3</label><br>
											<input style="visibility: hidden;" type="radio" id="Planner4" name="planner_list" value="Planner 4">
											<label style="visibility: hidden;" for="Planner4">Add a planner</label>
											<br>
											<br>
											
											<input type="checkbox" id="trace_length" value="True"  onchange="trace_length_filter()">
											<label for="trace_length"> Filter trace length</label>
											<br>
										
											<span id="define_length" style="color: grey;">Define length</span>
											<textarea placeholder="min" disabled class="vmiddle" name="min len" id="minlen" cols="4" rows="1"></textarea>
											<textarea placeholder="max" disabled class="vmiddle" name="max len" id="maxlen" cols="4" rows="1"></textarea>
										
											<br><br>
											<input type="checkbox" id="trace_date" value="True"  onchange="trace_date_filter()">
											<label for="trace_date"> Filter date</label>
											<br>
										
											<!-- <span id="define_date" style="color: grey;">Define date</span> -->
											
											<span class="d_date" style="color: grey; padding-right: 4px;">Min: </span>
											<input type="datetime-local" disabled id="mindate" name="min-time" value="2018-06-07T00:00:00" min="2010-01-01T00:00:00" max="2021-12-31T00:00:00" step="1">
											<br>
											<span class="d_date" style="color: grey;">Max:</span>
											<input type="datetime-local" disabled id="maxdate" name="max-time" value="2018-06-07T00:00:00" min="2010-01-01T00:00:00" max="2021-12-31T00:00:00" step="1">
											<!-- <textarea placeholder="min" disabled class="vmiddle" name="min date" id="mindate" cols="4" rows="1"></textarea>
											<textarea placeholder="max" disabled class="vmiddle" name="max date" id="maxdate" cols="4" rows="1"></textarea> -->
										

										</div>

										<div class="column-col space2-center" style=" visibility:hidden">
											
										</div>

										<div class="column-col center2-col">
											<span>Log detail</span><br>
											<br>
											<div class="vmiddle" style="width:100%; background-color: white;" name="log_detail" id="log_detail" cols="10" rows="15" ></div>
											<br>
											<br>
											<!-- <span style="visibility: hidden;" >Pnml detail</span><br>
											<textarea class="vmiddle" style="width:100%;" name="model_detail" id="model_detail" cols="10" rows="5" ></textarea> -->
											<br>
											<br>
											
										</div>

										<!-- <div class="column-col space2" style=" visibility:hidden">
											
										</div> -->


									</div>
									
								</div>
							
						
							
								<div style="text-align:center">
									<br>
									<button class="conf_check_button" type="button" style="font-size: 16px;" onclick="backDivForm()">Back</button>
									<button class="conf_check_button" type="button" style="font-size: 16px;" onclick="showResultonDFG()">Next</button>
									
								</div>
							
							</div>
						</div>
						<!-- </center> -->

						<div class="mapContainer" id="map2-content" style="display: none;">
							<!-- <button type="button" style="font-size: 16px; float: right;" onclick="">cCheckingComputation</button>
							<button type="button" style="font-size: 16px; float: right;" onclick="backPrecDiv()">Back</button> -->
							
							
							
							<!-- 
							<input type="checkbox" id="check_conformance" onchange="displayTracePopUp()">
							<label for="check_conformance"> 
								<i class="fa-solid fa-chevrons-left" id="btn_conformance"></i>
							</label>  -->
							 
							

							<div id="mytabsConformance">

									<span class="popuptext" id="myPopupConformance">Popup text...</span>
							
									
									<div id="tabTrace" style="visibility: hidden;" > 
										<h4 style="text-align: center;">Aligned Trace</h4>
										<br>

										

										<span>Event log file: </span>
										<span id="log_name" style="color: red;">{{ nameupload }}</span>
										<br>

										<span style="display: none;">Alignment time: </span>
										<span id="alignment_time" style="color: blue; display: none;"> 110 ms. </span>
										<br>

										<span>Alignment cost: </span>
										<span id="alignment_cost" style="color: blue;"> 7 </span>
										<br>

										<span>Plan length: </span>
										<span id="plan_length" style="color: blue;"> 0 </span>
										<br>
										<br>

										<span>Trace selected: </span>
										<select id="trace_selected" name="trace_selected" onchange="updateTraceRequest()">

										</select>
										<br>
										<br>
										<span>Highlight trace: </span>
										<select id="highlight_trace" name="highlight_trace" onchange="highlightTrace()">
											<option value="yes">Yes</option>
											<option value="no" selected>No</option>
										</select>

										<br>
										<br>
										

										<div id="aligner_space"> 
											<span style="text-decoration: underline; font-size: 15px; color: green">-- ALIGNMENT --</span><br>
											
										</div>
										<br>

										
									</div>
							
							</div>
								
							<span class="popuptext" id="myPopup_cChecking">Popup text...</span>



							<br>

							<div class="map-content" id="map-content2">
								<svg id="graphContainer2">
								
								</svg>
							</div>


						</div>
								
					</div>

					<div class="scan text" id="scan-text">
						<div class="title"> Scan </div>
						
						

						<div class="row">
							<!-- <div class="row"> -->
								<div class="column col-first">

									<div id="buttons-container">
										<div class="row">
											

											<div class="col-md-6" height="10px">
												<div class="alert alert-info alert-dismissible fade show" id="info_clear" style="display:none" role="alert">
													<strong>Info!</strong> Select a new XES file to analyze.
													<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_info_clear();"></button>
												</div>
												<div class="alert alert-info alert-dismissible fade show" id="download_info" style="display:none" role="alert">
													<strong>Info!</strong> Downloading file...
													<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_download_info();"></button>
												</div> 
												{% with messages = get_flashed_messages(with_categories=true) %}
													{% if messages %}
														{% for category, message in messages %}
															<div class="alert alert-{{ category }} alert-dismissible fade show" id="error_flash">
																<span>{{ message }}</span>
																<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_flash();"></button>
															</div>
														{% endfor %}
													{% endif %}
												{% endwith %} 
											</div> 

										</div>
									</div>
									
									<div id="segment-container">
										<div class="title" style="margin-top:1%">Segments' list</div> 
										<div id="scroll-seg" class="Divtext">
											<table class="table table-hover table-dark table" >
												<thead id="table-seg">
													<tr><th class="col-occ">Occurrence</th><th class="col-seg">Segment</th></tr>
												</thead>
												<tbody id="table-seg-body">
													
												</tbody>
											</table>
										</div>
									</div>
									<div id="divSeg" class="showDiv" style="display:none"></div>

									<div id="deleted-segment-container">
										<div class="title" style="margin-top:1%">Not accepted segments' list</div>
										<div id="scroll-del-seg" class="DivtextDel">
											<table class="table table-hover table-dark">
												<thead id="table-del-seg">
													<tr><th class="col-occ">Occurrence</th><th class="col-seg">Segment</th></tr>
												</thead>
												<tbody id="table-del-seg-body"></tbody>
											</table>
										</div>
									</div>

								</div>
								<div class="column col-second">
									<div>
										<div style="text-align: center;">
											<button type="button" onclick="hideShow();" id="hideShowBtn" value="Hide" disabled>HIDE</button>
											<!-- <button type="button" onclick="clearDiv();" id="clearBtn" disabled>CLEAR</button> -->
											<!-- <button type="button" onclick="exportFile();" id="exportBtn" download disabled>EXPORT &nbsp;</button> -->
											<button id="sortBtn" type="button" value="descending" onclick="changeSort();" disabled>DESCENDING</button>
										</div>
									</div>
									<div id="divInfo" class="showInfo" style="display:none">
										<button class="btn-close" id="infoBtn" onclick="close_infoBtn()"></button>
										<div id="groupConstraints"></div>
										<div id="nameConstraint"></div>
										<div id="explanation"></div>
										<div id="examples"></div>
										<div style="display: inline-block;">
											<div id="rightExample1" style="float:left; margin-left:8px">
												<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
													<path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
												</svg>
												<div id="re1" style="float:right;"></div>
											</div>
											<div id="rightExample2" style="float:left; margin-left:20px">
												<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
													<path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
												</svg>
												<div id="re2" style="float:right;"></div>
											</div>
										</div>    
										<div style="display:inline-block; margin-top:8%">
											<div id="wrongExample1" style="float:left;margin-left:8px">
												<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
													<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
												</svg>
												<div id="we1" style="float:right;"></div>
											</div>
											<div id="wrongExample2" style="float:left; margin-left:20px">
												<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
													<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
												</svg>
												<div id="we2" style="float:right;"></div>
											</div> 
										</div>    
									</div>
									<div id="new_rule">
										<div class="title-rule" style="text-align:center">Add new constraint</div>
										<div id="first-combobox" class="combobox">
											<div class="sub-title">Select constraint
												<button id="infoId" onclick ="showInfo();" disabled><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
													<path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
												</svg></button>
											</div>
											<select class="form-select form-select-sm" aria-label=".form-select-sm example" id="selectFun" onclick="selectFunction();" disabled>                          
												<option value="Start">Start(a)</option>
												<option value="End">End(a)</option>
												<option value="Existence">Existence(a)</option>
												<option value="Absence">Absence(a)</option>
												<option value="Choice">Choice(a,b)</option>
												<option value="ExclusiveChoice">ExclusiveChoice(a,b)</option>
												<option value="RespondedExistence">RespondedExistence(a,b)</option>
												<option value="Response">Response(a,b)</option>
												<option value="AlternateResponse">AlternateResponse(a,b)</option>
												<option value="ChainResponse">ChainResponse(a,b)</option>
												<option value="Precedence">Precedence(a,b)</option>
												<option value="AlternatePrecedence">AlternatePrecedence(a,b)</option>
												<option value="ChainPrecedence">ChainPrecedence(a,b)</option>
												<option value="CoExistence">CoExistence(a,b)</option>
												<option value="Succession">Succession(a,b)</option>
												<option value="AlternateSuccession">AlternateSuccession(a,b)</option>
												<option value="ChainSuccession">ChainSuccession(a,b)</option>
												<option value="NotCoExistence">NotCoExistence(a,b)</option>
												<option value="NotSuccession">NotSuccession(a,b)</option>
												<option value="NotChainSuccession">NotChainSuccession(a,b)</option>
											</select>
										</div>
										<div id="second-combobox" class="combobox">
											<div class="sub-title">Select activity 1</div>
											<select class="form-select form-select-sm" aria-label=".form-select-sm example" id="act1" disabled>
												
											</select>
										</div>
										<div id="third-combobox" class="combobox">
											<div class="sub-title">Select activity 2</div>
											<select class="form-select form-select-sm" aria-label=".form-select-sm example" id="act2" disabled>
												
											</select>
											<button id="button-apply" type="button" style="justify-content:center;" onclick="takeFunction();" disabled>APPLY</button>
										</div>
									</div>
									<div class="alert alert-danger alert-dismissible fade show" id="error_adding_rule" style="display:none" role="alert">
										<strong>Error!</strong> It is not possible to use the same activity twice.
										<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_error_adding_rule();"></button>
									</div>
									<div class="alert alert-danger alert-dismissible fade show" id="error_duplicate_rule" style="display:none" role="alert">
										<strong>Error!</strong> The rule already exists.
										<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_error_duplicate_rule();"></button>
									</div>
									<div class="alert alert-danger alert-dismissible fade show" id="error_opposite_rule" style="display:none" role="alert">
										<strong>Error!</strong> The rule is in contrast with an existing one.
										<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_error_opposite_rule();"></button>
									</div>
									<div id="rules">
										<div class="title-rule" style="text-align:center">List of constraints</div>
										<button type="button" class="btn btn-danger btn btn-default" float="right" style="margin-left:85%; margin-top:-12%; display: inline-block" data-toggle="confirmation" data-placement="bottom"
										onclick="deleteBtn();" id="deleteBtnId" disabled><label><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
											<path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
										  </svg></label></button>
										<div class="alert alert-danger alert-dismissible fade show" id="error_no_rule" style="display:none" role="alert">
											<strong>Error!</strong> There are no rules to delete.
											<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_error_no_rule();"></button>
										</div>
										<div class="alert alert-danger alert-dismissible fade show" id="error_no_check_rule" style="display:none" role="alert">
											<strong>Error!</strong> Select the rule to delete.
											<button type="button" class="btn-close" data-bs-dismiss="alert" onclick="close_error_no_check_rule();"></button>
										</div> 
										<ul class="divRule no-bullets" id="ruleId"></ul>  
									</div>
								</div>
							<!-- </div> -->
						</div>	

					</div>



				</div>
				
		</div>
		
	</div>
	
</body>



<!--(script with getMap())-->
<script>
	var nodes_id_association={}
	var frontend = document.getElementById("path_frontend").innerHTML;
	// console.log(frontend)

	var menu = document.getElementById("menu");
	menu.style.display = "none";

	var menuBtn = document.getElementById("check");
	var content = document.getElementById("content");
	var map = document.getElementById("map");
	var elanalysis = document.getElementById("elanalysis");
	var cChecking = document.getElementById("cChecking");
	var mapText = document.getElementById("map-text");
	var elanalysisText = document.getElementById("elanalysis-text");
	var scanText = document.getElementById("scan-text");
	var cCheckingText = document.getElementById("cChecking-text");

	var sliderPF = document.getElementById("myPathF");
	var sliderPP = document.getElementById("myPathP");
	var sliderAF = document.getElementById("myActF");
	var sliderAP = document.getElementById("myActP");
	var outputPF = document.getElementById("pathF");
	var outputPP = document.getElementById("pathP");
	var outputAF = document.getElementById("actF");
	var outputAP = document.getElementById("actP");

	outputPF.innerHTML = sliderPF.value;
	outputPP.innerHTML = sliderPP.value;
	outputAF.innerHTML = sliderAF.value;
	outputAP.innerHTML = sliderAP.value;

	var perf_checked = document.getElementById("perf_checked");
	if ((perf_checked).value == "true"){
		(document.getElementById("tabFreq")).checked = true;
		(document.getElementById("tabPerf")).checked = false;
	}

	// avoid to use enter to have a new line
	$('#pathP').keypress(function(event) {
		if (event.keyCode == 13) {
			event.preventDefault();
			// $('textarea').prop('readonly', true);
			// document.getElementById("invisibleButton2").click();
		}
	});
	$('#pathF').keypress(function(event) {
		if (event.keyCode == 13) {
			event.preventDefault();
			// $('textarea').prop('readonly', true);
			// document.getElementById("invisibleButton2").click();
		}
	});

	sliderPF.oninput = function() {
		outputPF.innerHTML = this.value;
		outputPP.innerHTML = this.value;
		outputPF.value = this.value;
		outputPP.value = this.value;
		sliderPP.value = this.value;
		sliderPF.value = this.value;
		$(".change_form").css("visibility", "visible");
		$(".dis_submit").addClass("dosubmit");
		$(".dis_submit").attr('disabled', false);
		

	}
	sliderPP.oninput = function() {
		outputPF.innerHTML = this.value;
		outputPP.innerHTML = this.value;
		outputPF.value = this.value;
		outputPP.value = this.value;
		sliderPF.value = this.value;
		sliderPP.value = this.value;
		$(".change_form").css("visibility", "visible");
		$(".dis_submit").addClass("dosubmit");
		$(".dis_submit").attr('disabled', false);
	}
	sliderAF.oninput = function() {
		outputAF.innerHTML = this.value;
		outputAP.innerHTML = this.value;
		outputAF.value = this.value;
		outputAP.value = this.value;
		sliderAF.value = this.value;
		sliderAP.value = this.value;
		$(".change_form").css("visibility", "visible");
		$(".dis_submit").addClass("dosubmit");
		$(".dis_submit").attr('disabled', false);
	}
	sliderAP.oninput = function() {
		outputAP.innerHTML = this.value;
		outputAF.innerHTML = this.value;
		outputAP.value = this.value;
		outputAF.value = this.value;
		sliderAF.value = this.value;
		sliderAP.value = this.value;
		$(".change_form").css("visibility", "visible");
		$(".dis_submit").addClass("dosubmit");
		$(".dis_submit").attr('disabled', false);
	}

	

	var filtered_timeframe = false, filtered_perf = false, filtered_attribute=false,  redo_function=false;
	var json, ul1, ul2, allCases, allEvents, maxDate, minDate;
	var selected = "variant1";

	var total_trace_number=0
	var total_event_number=0
	var max_event_length=0
	var min_event_length=Number.MAX_SAFE_INTEGER



	initialRequest();

	getMap(true);

</script>


<script>
	// ZOOM MAP1
	var slider = document.getElementById("myRange");
	var output = document.getElementById("demo");
	const zvgZoom = document.getElementById("graphContainer");

	output.innerHTML = slider.value;


	const svgContainer = document.getElementById("map-content");

	var viewBox = {x:0,y:0,w:"1920",h:"1080"};
	var attr = String(viewBox.x)+" "+String(viewBox.y)+" "+String(viewBox.w)+" "+String(viewBox.h);
	zvgZoom.setAttribute('viewBox', attr);

	//console.log(zvgZoom.clientWidth);
	//console.log(String(zvgZoom.style.width));
	//const svgSize = {w:zvgZoom.style.width,h:zvgZoom.style.height};
	const svgSize = {w:"1920",h:"1080"};
	//console.log("Initial svgSize: "+String(svgSize.w)+" "+String(svgSize.h));
	var isPanning = false;
	var startPoint = {x:0,y:0};
	var endPoint = {x:0,y:0};;
	var scale = 1;

	svgContainer.onmousewheel = function(e) {
		e.preventDefault();
		var w = viewBox.w;
		var h = viewBox.h;
		var mx = e.offsetX;//mouse x  
		var my = e.offsetY;    
		var dw = -w*Math.sign(e.deltaY)*0.05;
		var dh = -h*Math.sign(e.deltaY)*0.05;
		var dx = dw*mx/svgSize.w;
		var dy = dh*my/svgSize.h;
		viewBox = {x:viewBox.x+dx,y:viewBox.y+dy,w:viewBox.w-dw,h:viewBox.h-dh};
		scale = svgSize.w/viewBox.w;
		slider.value = scale*100;
		output.innerHTML = slider.value;
		//   zoomValue.innerText = String(Math.round(scale*100)/100);
		var attr = String(viewBox.x)+" "+String(viewBox.y)+" "+String(viewBox.w)+" "+String(viewBox.h);
		zvgZoom.setAttribute('viewBox', attr);
	}


	svgContainer.onmousedown = function(e){
		isPanning = true;
		startPoint = {x:e.x,y:e.y};   
	}

	svgContainer.onmousemove = function(e){
		if (isPanning){
			endPoint = {x:e.x,y:e.y};
			var dx = (startPoint.x - endPoint.x)/scale;
			var dy = (startPoint.y - endPoint.y)/scale;
			var movedViewBox = {x:viewBox.x+dx,y:viewBox.y+dy,w:viewBox.w,h:viewBox.h};
			var attr = String(movedViewBox.x)+" "+String(movedViewBox.y)+" "+String(movedViewBox.w)+" "+String(movedViewBox.h);
			zvgZoom.setAttribute('viewBox', attr);
		}
	}

	svgContainer.onmouseup = function(e){
		if (isPanning){ 
			endPoint = {x:e.x,y:e.y};
			var dx = (startPoint.x - endPoint.x)/scale;
			var dy = (startPoint.y - endPoint.y)/scale;
			viewBox = {x:viewBox.x+dx,y:viewBox.y+dy,w:viewBox.w,h:viewBox.h};   
			var attr = String(viewBox.x)+" "+String(viewBox.y)+" "+String(viewBox.w)+" "+String(viewBox.h);
			zvgZoom.setAttribute('viewBox', attr);
			isPanning = false;
		}
	}

	svgContainer.onmouseleave = function(e){
		isPanning = false;
	}

	var lastNum = 0;
	var v;
	slider.oninput = function(e) {

		if(lastNum < this.value) {
				v = -500;
		} else {
			v = 500;
		}
		lastNum = this.value;
		
		var w = viewBox.w;
		var h = viewBox.h;
		var mx = 0;//mouse x  
		var my = 0;
		var dw = -w*Math.sign(v)*0.05;
		var dh = -h*Math.sign(v)*0.05;
		var dx = dw*mx/svgSize.w;
		var dy = dh*my/svgSize.h;
		viewBox = {x:viewBox.x+dx,y:viewBox.y+dy,w:viewBox.w-dw,h:viewBox.h-dh};
		scale = svgSize.w/viewBox.w;
		slider.value = scale*100;
		output.innerHTML = slider.value;
		var attr = String(viewBox.x)+" "+String(viewBox.y)+" "+String(viewBox.w)+" "+String(viewBox.h);
		zvgZoom.setAttribute('viewBox', attr);
	}
	
</script>


<script>
	//ZOOM MAP2 
	const zvgZoom2 = document.getElementById("graphContainer2");

	const svgContainer2 = document.getElementById("map-content2");
	//console.log(svgContainer2);

	var viewBox2 = {x:0,y:0,w:"1920",h:"1080"};
	var attr = String(viewBox2.x)+" "+String(viewBox2.y)+" "+String(viewBox2.w)+" "+String(viewBox2.h);
	zvgZoom2.setAttribute('viewBox', attr);


	//const svgSize = {w:zvgZoom2.style.width,h:zvgZoom2.style.height};
	const svgSize2 = {w:"1920",h:"1080"};
	//console.log("Initial svgSize2: "+String(svgSize2.w)+" "+String(svgSize2.h));
	var isPanning2 = false;
	var startPoint2 = {x:0,y:0};
	var endPoint2 = {x:0,y:0};;
	var scale2 = 1;

	svgContainer2.onmousewheel = function(e) {
	e.preventDefault();
	var w = viewBox2.w;
	var h = viewBox2.h;
	var mx = e.offsetX;//mouse x  
	var my = e.offsetY;    
	var dw = -w*Math.sign(e.deltaY)*0.05;
	var dh = -h*Math.sign(e.deltaY)*0.05;
	var dx = dw*mx/svgSize2.w;
	var dy = dh*my/svgSize2.h;
	viewBox2 = {x:viewBox2.x+dx,y:viewBox2.y+dy,w:viewBox2.w-dw,h:viewBox2.h-dh};
	scale2 = svgSize2.w/viewBox2.w;
	   slider.value = scale2*100;
	   output.innerHTML = slider.value;
	//   zoomValue.innerText = String(Math.round(scale2*100)/100);
	var attr = String(viewBox2.x)+" "+String(viewBox2.y)+" "+String(viewBox2.w)+" "+String(viewBox2.h);
	zvgZoom2.setAttribute('viewBox', attr);
	}


	svgContainer2.onmousedown = function(e){
	isPanning2 = true;
	startPoint2 = {x:e.x,y:e.y};   
	}

	svgContainer2.onmousemove = function(e){
	if (isPanning2){
	endPoint2 = {x:e.x,y:e.y};
	var dx = (startPoint2.x - endPoint2.x)/scale2;
	var dy = (startPoint2.y - endPoint2.y)/scale2;
	var movedViewBox = {x:viewBox2.x+dx,y:viewBox2.y+dy,w:viewBox2.w,h:viewBox2.h};
	var attr = String(movedViewBox.x)+" "+String(movedViewBox.y)+" "+String(movedViewBox.w)+" "+String(movedViewBox.h);
	zvgZoom2.setAttribute('viewBox', attr);
	}
	}

	svgContainer2.onmouseup = function(e){
	if (isPanning2){ 
	endPoint2 = {x:e.x,y:e.y};
	var dx = (startPoint2.x - endPoint2.x)/scale2;
	var dy = (startPoint2.y - endPoint2.y)/scale2;
	viewBox2 = {x:viewBox2.x+dx,y:viewBox2.y+dy,w:viewBox2.w,h:viewBox2.h};   
	var attr = String(viewBox2.x)+" "+String(viewBox2.y)+" "+String(viewBox2.w)+" "+String(viewBox2.h);
	zvgZoom2.setAttribute('viewBox', attr);
	isPanning2 = false;
	}
	}

	svgContainer2.onmouseleave = function(e){
	isPanning2 = false;
	}
</script>


</html>